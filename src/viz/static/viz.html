<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon">
        <title>Visualization</title>
    </head>
    <body>
        <div id="error-message" style="background-color: red; position: fixed; display: none">
            unhandled error, see console logs
        </div>
        <script>
        window.onerror = window.onunhandledrejection = () => {
            document.getElementById('error-message').style.display = 'block';
        };
        </script>

        <div style="position: relative; width: 600px; height: 600px; display: inline-block">
            <canvas height="600" width="600" style="position: absolute" id="hole"></canvas>
            <canvas height="600" width="600" style="position: absolute" id="f_init"></canvas>
            <canvas height="600" width="600" style="position: absolute" id="figure"></canvas>
        </div>
        <div style="display: inline-block">
            <p>Click on vertices to select/deselect.</p>
            <p>Use keyboard arrows to move selected vertices.</p>
            <p><a href="javascript:void(0)" id="select_all">select all</a></p>
            <p><a href="javascript:void(0)" id="deselect_all">deselect all</a></p>

            Solution:
            <textarea id="solution"></textarea>
        </div>

        <script type="module" src="../../../public/js/spec.js"></script>
        <script type="module" src="viz.js"></script>

        <script>window.onload = () => {
            window.spec.main();
            console.log("Welcome to ICFPC 2021, here is current problem:", window.spec.state.current_problem);
            window.document.body.addEventListener('spec_refresh', () => {
                console.log("Received 'spec_refresh' event, here is the new validated solution state:", window.spec.state.current_solution);
            })
        }</script>
    </body>
</html>