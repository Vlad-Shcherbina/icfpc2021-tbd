<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon">
    <title>Visualization</title>
</head>

<style>
    .grid-wrapper {
        display: grid;
        grid-template-columns: 600px 1fr;
    }

    #canvas-cell {
        grid-column: 1;
        grid-row: 1;
    }

    #toolbar-cell {
        grid-column: 2;
        grid-row: 1;
    }
</style>

<body>
    <div id="error-message" style="background-color: red; position: fixed; display: none">
        unhandled error, see console logs
    </div>
    <script>
        window.onerror = window.onunhandledrejection = () => {
            document.getElementById('error-message').style.display = 'block';
        };
    </script>

    <div class="grid-wrapper">
        <div id="canvas-cell" style="position: relative; width: 600px; height: 600px">
            <canvas height="600" width="600" style="position: absolute" id="foci"></canvas>
            <canvas height="600" width="600" style="position: absolute" id="hole"></canvas>
            <canvas height="600" width="600" style="position: absolute" id="f_init"></canvas>
            <canvas height="600" width="600" style="position: absolute" id="circles"></canvas>
            <canvas height="600" width="600" style="position: absolute" id="figure"></canvas>
        </div>
        <div id="toolbar-cell">
            <p id="problem-stats"></p>

            <h3 id="score"></h3>

            <button id="shake-button">shake selected</button>
            <select id="shake-method">
                <option value="random">random</option>
                <option value="banana">banana</option>
                <option value="ice">ice (TODO)</option>
                <option value="mango">mango</option>
                <option value="greedy">greedy</option>
            </select>
            <input id="shake-param" type="range" min=1 max=7 value=5>

            <p><a href="javascript:void(0)" id="select_all">select all</a></p>
            <p><a href="javascript:void(0)" id="deselect_all">deselect all</a></p>
            <p>
                <input type="checkbox" id="show_circles" checked>
                <label for="scales">show circles (hotkey: C)</label>
            </p>

            Solution:<br>
            <textarea id="solution"></textarea><br>
            <button id="submit-button">Submit to portal</button>
            <p id="submit-result"></p>
            <p id="our-submissions"></p>

            <hr>
            <details>
                <summary>help</summary>
                <p>Use Ctrl, Shift or Meta to select multiple.</p>
                <p>Use M and N keys to rotate selected points around their center of mass by +/- 15Â°.</p>
                <p>Use keyboard arrows to move selected vertices.</p>
                <p>You can copy solutions from the text area, or paste into it.</p>
                <p><span id="edge_too_long">Edge is too long.</span>
                    <span id="edge_too_short">Edge is too short.</span> Dashed edges are out of hole.
                </p>
                <p>Circles show the Goldilocks area for each edge of the selected vertex.</p>
            </details>

        </div>
    </div>

    <script type="module" src="viz.js"></script>

</body>

</html>
